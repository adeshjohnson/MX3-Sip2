function observe_field_for_number(e){var n=/[\D\+]+/g;e.bind("change keyup",function(){var e=$(this),a=e.val(),r=a.replace(n,"");r!=a&&(e.val(r),e.effect("highlight",{color:"#ff0000"},400))})}function show_ajax_start(){$("#number_results").html(""),$(".ajax_loader").show()}function show_ajax_end(){$(".ajax_loader").hide()}function update_number_info(e){var n=$("<ul></ul>");$.each(e,function(e,a){var r=a.name,u=a.value;"with_flag"==a.type&&(flag=$("<img src='"+number_info.url.prefix+"/images/flags/"+a.flag+".jpg'>"),u=$("<div/>").append(flag.clone()).html()+"&nbsp;"+u),n.append($("<li></li>").append(r).append(":&nbsp;").append(u))}),$("#number_results").html(""),$("#number_results").append(n)}function remote_update_number_info(){var e=$("#number_input").val();e&&e>0?(show_ajax_start(),$.ajax({url:number_info.url.number_info_path,data:{number:e},method:"GET",dataType:"json",success:update_number_info,complete:show_ajax_end})):$("#number_results").html(number_info.i18n.enter_number)}function remove_ready_number_menu(){$(".darkenBackground").remove(),$("#number_information").remove()}function bind_ready_number(){$("li#number a").click(function(e){e.preventDefault();var n=$("<div class='darkenBackground'></div>"),a=$("<input type='text' name='number' id='number_input' size='30'>"),r=$("<div class='close_button'></div>"),u=$("<div class='button submit'><span class='img'></span>"+number_info.i18n.button_ok+"</div>"),i=$("<div class='button cancel'><span class='img'></span>"+number_info.i18n.button_cancel+"</div>"),o=$("<form><label for='number_input'>"+number_info.i18n.number+": </label></form>"),_=$("<div id='number_information' class='number_information'></div>"),d=$("<div class='button_bar'></div>"),t=$("<div class='ajax_loader'></div><div id='number_results'></div>");return observe_field_for_number(a),n.click(remove_ready_number_menu),r.click(remove_ready_number_menu),i.click(remove_ready_number_menu),u.click(remote_update_number_info),n.appendTo("body"),d.append(u),d.append(i),o.append(a),o.append(t),o.append(d),_.append(r),_.append(o),_.appendTo("body"),!1})}$(document).ready(bind_ready_number);