function dd2MercMetersLng(e){return WGS84_SEMI_MAJOR_AXIS*e*DEG2RAD}function dd2MercMetersLat(e){var t=e*DEG2RAD;return WGS84_SEMI_MAJOR_AXIS*Math.log(Math.tan((t+PI/2)/2)*Math.pow((1-WGS84_ECCENTRICITY*Math.sin(t))/(1+WGS84_ECCENTRICITY*Math.sin(t)),WGS84_ECCENTRICITY/2))}function addWMSPropertiesToLayer(e,t,r,a,M,s,E){return e.format=M,e.baseURL=t,e.styles=a,e.layers=r,e.mercatorEpsg=s,e.useGeographic=E,e}var WGS84_SEMI_MAJOR_AXIS=6378137,WGS84_ECCENTRICITY=.08181919131087181,DEG2RAD=.0174532922519943,PI=3.14159267;getTileUrlForWMS=function(e,t,r){var a=new GPoint(256*e.x,256*(e.y+1)),M=new GPoint(256*(e.x+1),256*e.y),s=G_NORMAL_MAP.getProjection().fromPixelToLatLng(a,t,r),E=G_NORMAL_MAP.getProjection().fromPixelToLatLng(M,t,r);if(this.useGeographic)var S=s.x+","+s.y+","+E.x+","+E.y,n="EPSG:4326";else var S=dd2MercMetersLng(s.x)+","+dd2MercMetersLat(s.y)+","+dd2MercMetersLng(E.x)+","+dd2MercMetersLat(E.y),n="EPSG:"+this.mercatorEpsg;var o=this.baseURL;return o+="?REQUEST=GetMap",o+="&SERVICE=WMS",o+="&VERSION=1.1.1",o+="&LAYERS="+this.layers,o+="&STYLES="+this.styles,o+="&FORMAT=image/"+this.format,o+="&BGCOLOR=0xFFFFFF",o+="&TRANSPARENT=TRUE",o+="&SRS="+n,o+="&BBOX="+S,o+="&WIDTH=256",o+="&HEIGHT=256",o+="&reaspect=false"};