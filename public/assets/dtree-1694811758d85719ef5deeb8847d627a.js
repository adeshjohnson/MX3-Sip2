/*
 |--------------------------------------------------|

 | dTree 2.05 | www.destroydrop.com/javascript/tree/ |

 |---------------------------------------------------|

 | Copyright (c) 2002-2003 Geir Landr               |

 |                                                   |

 | This script can be used freely as long as all     |

 | copyright messages are intact.                    |

 |                                                   |

 | Updated: 17.04.2003                               |

 |-------------------------------------------------- |
 */
function Node(e,t,i,s,o,n,d,h,r){this.id=e,this.pid=t,this.name=i,this.url=s,this.title=o,this.target=n,this.icon=d,this.iconOpen=h,this._io=r||!1,this._is=!1,this._ls=!1,this._hc=!1,this._ai=0,this._p}function dTree(e){this.config={target:null,folderLinks:!0,useSelection:!0,useCookies:!0,useLines:!0,useIcons:!0,useStatusText:!1,closeSameLevel:!1,inOrder:!1},this.icon={root:mor_web_dir+"/assets/dtree/base.gif",folder:mor_web_dir+"/assets/dtree/folder.gif",folderOpen:mor_web_dir+"/assets/dtree/folderopen.gif",node:mor_web_dir+"/assets/dtree/page.gif",empty:mor_web_dir+"/assets/dtree/empty.gif",line:mor_web_dir+"/assets/dtree/line.gif",join:mor_web_dir+"/assets/dtree/join.gif",joinBottom:mor_web_dir+"/assets/dtree/joinbottom.gif",plus:mor_web_dir+"/assets/dtree/plus.gif",plusBottom:mor_web_dir+"/assets/dtree/plusbottom.gif",minus:mor_web_dir+"/assets/dtree/minus.gif",minusBottom:mor_web_dir+"/assets/dtree/minusbottom.gif",nlPlus:mor_web_dir+"/assets/dtree/nolines_plus.gif",nlMinus:mor_web_dir+"/assets/dtree/nolines_minus.gif"},this.obj=e,this.aNodes=[],this.aIndent=[],this.root=new Node(-1),this.selectedNode=null,this.selectedFound=!1,this.completed=!1}dTree.prototype.add=function(e,t,i,s,o,n,d,h,r){this.aNodes[this.aNodes.length]=new Node(e,t,i,s,o,n,d,h,r)},dTree.prototype.openAll=function(){this.oAll(!0)},dTree.prototype.closeAll=function(){this.oAll(!1)},dTree.prototype.toString=function(){var e='<div class="dtree">\n';return document.getElementById?(this.config.useCookies&&(this.selectedNode=this.getSelected()),e+=this.addNode(this.root)):e+="Browser not supported.",e+="</div>",this.selectedFound||(this.selectedNode=null),this.completed=!0,e},dTree.prototype.addNode=function(e){var t="",i=0;for(this.config.inOrder&&(i=e._ai),i;i<this.aNodes.length;i++)if(this.aNodes[i].pid==e.id){var s=this.aNodes[i];if(s._p=e,s._ai=i,this.setCS(s),!s.target&&this.config.target&&(s.target=this.config.target),s._hc&&!s._io&&this.config.useCookies&&(s._io=this.isOpen(s.id)),!this.config.folderLinks&&s._hc&&(s.url=null),this.config.useSelection&&s.id==this.selectedNode&&!this.selectedFound&&(s._is=!0,this.selectedNode=i,this.selectedFound=!0),t+=this.node(s,i),s._ls)break}return t},dTree.prototype.node=function(e,t){var i='<div class="dTreeNode">'+this.indent(e,t);return this.config.useIcons&&(e.icon||(e.icon=this.root.id==e.pid?this.icon.root:e._hc?this.icon.folder:this.icon.node),e.iconOpen||(e.iconOpen=e._hc?this.icon.folderOpen:this.icon.node),this.root.id==e.pid&&(e.icon=this.icon.root,e.iconOpen=this.icon.root),i+='<img id="i'+this.obj+t+'" src="'+(e._io?e.iconOpen:e.icon)+'" alt="" />'),e.url?(i+='<a id="s'+this.obj+t+'" class="'+(this.config.useSelection?e._is?"nodeSel":"node":"node")+'" href="'+e.url+'"',e.title&&(i+=' title="'+e.title+'"'),e.target&&(i+=' target="'+e.target+'"'),this.config.useStatusText&&(i+=" onmouseover=\"window.status='"+e.name+"';return true;\" onmouseout=\"window.status='';return true;\" "),this.config.useSelection&&(e._hc&&this.config.folderLinks||!e._hc)&&(i+=' onclick="javascript: '+this.obj+".s("+t+');"'),i+=">"):this.config.folderLinks&&e.url||!e._hc||e.pid==this.root.id||(i+='<a href="javascript: '+this.obj+".o("+t+');" class="node">'),i+=e.name,(e.url||(!this.config.folderLinks||!e.url)&&e._hc)&&(i+="</a>"),i+="</div>",e._hc&&(i+='<div id="d'+this.obj+t+'" class="clip" style="display:'+(this.root.id==e.pid||e._io?"block":"none")+';">',i+=this.addNode(e),i+="</div>"),this.aIndent.pop(),i},dTree.prototype.indent=function(e,t){var i="";if(this.root.id!=e.pid){for(var s=0;s<this.aIndent.length;s++)i+='<img src="'+(1==this.aIndent[s]&&this.config.useLines?this.icon.line:this.icon.empty)+'" alt="" />';e._ls?this.aIndent.push(0):this.aIndent.push(1),e._hc?(i+='<a href="javascript: '+this.obj+".o("+t+');"><img id="j'+this.obj+t+'" src="',i+=this.config.useLines?e._io?e._ls&&this.config.useLines?this.icon.minusBottom:this.icon.minus:e._ls&&this.config.useLines?this.icon.plusBottom:this.icon.plus:e._io?this.icon.nlMinus:this.icon.nlPlus,i+='" alt="" /></a>'):i+='<img src="'+(this.config.useLines?e._ls?this.icon.joinBottom:this.icon.join:this.icon.empty)+'" alt="" />'}return i},dTree.prototype.setCS=function(e){for(var t,i=0;i<this.aNodes.length;i++)this.aNodes[i].pid==e.id&&(e._hc=!0),this.aNodes[i].pid==e.pid&&(t=this.aNodes[i].id);t==e.id&&(e._ls=!0)},dTree.prototype.getSelected=function(){var e=this.getCookie("cs"+this.obj);return e?e:null},dTree.prototype.s=function(e){if(this.config.useSelection){var t=this.aNodes[e];(!t._hc||this.config.folderLinks)&&this.selectedNode!=e&&((this.selectedNode||0==this.selectedNode)&&(eOld=document.getElementById("s"+this.obj+this.selectedNode),eOld.className="node"),eNew=document.getElementById("s"+this.obj+e),eNew.className="nodeSel",this.selectedNode=e,this.config.useCookies&&this.setCookie("cs"+this.obj,t.id))}},dTree.prototype.o=function(e){var t=this.aNodes[e];this.nodeStatus(!t._io,e,t._ls),t._io=!t._io,this.config.closeSameLevel&&this.closeLevel(t),this.config.useCookies&&this.updateCookie()},dTree.prototype.oAll=function(e){for(var t=0;t<this.aNodes.length;t++)this.aNodes[t]._hc&&this.aNodes[t].pid!=this.root.id&&(this.nodeStatus(e,t,this.aNodes[t]._ls),this.aNodes[t]._io=e);this.config.useCookies&&this.updateCookie()},dTree.prototype.openTo=function(e,t,i){if(!i)for(var s=0;s<this.aNodes.length;s++)if(this.aNodes[s].id==e){e=s;break}var o=this.aNodes[e];o.pid!=this.root.id&&o._p&&(o._io=!0,o._is=t,this.completed&&o._hc&&this.nodeStatus(!0,o._ai,o._ls),this.completed&&t?this.s(o._ai):t&&(this._sn=o._ai),this.openTo(o._p._ai,!1,!0))},dTree.prototype.closeLevel=function(e){for(var t=0;t<this.aNodes.length;t++)this.aNodes[t].pid==e.pid&&this.aNodes[t].id!=e.id&&this.aNodes[t]._hc&&(this.nodeStatus(!1,t,this.aNodes[t]._ls),this.aNodes[t]._io=!1,this.closeAllChildren(this.aNodes[t]))},dTree.prototype.closeAllChildren=function(e){for(var t=0;t<this.aNodes.length;t++)this.aNodes[t].pid==e.id&&this.aNodes[t]._hc&&(this.aNodes[t]._io&&this.nodeStatus(!1,t,this.aNodes[t]._ls),this.aNodes[t]._io=!1,this.closeAllChildren(this.aNodes[t]))},dTree.prototype.nodeStatus=function(e,t,i){eDiv=document.getElementById("d"+this.obj+t),eJoin=document.getElementById("j"+this.obj+t),this.config.useIcons&&(eIcon=document.getElementById("i"+this.obj+t),eIcon.src=e?this.aNodes[t].iconOpen:this.aNodes[t].icon),eJoin.src=this.config.useLines?e?i?this.icon.minusBottom:this.icon.minus:i?this.icon.plusBottom:this.icon.plus:e?this.icon.nlMinus:this.icon.nlPlus,eDiv.style.display=e?"block":"none"},dTree.prototype.clearCookie=function(){var e=new Date,t=new Date(e.getTime()-864e5);this.setCookie("co"+this.obj,"cookieValue",t),this.setCookie("cs"+this.obj,"cookieValue",t)},dTree.prototype.setCookie=function(e,t,i,s,o,n){document.cookie=escape(e)+"="+escape(t)+(i?"; expires="+i.toGMTString():"")+"; path=/"+(o?"; domain="+o:"")+(n?"; secure":"")},dTree.prototype.getCookie=function(e){var t="",i=document.cookie.indexOf(escape(e)+"=");if(-1!=i){var s=i+(escape(e)+"=").length,o=document.cookie.indexOf(";",s);t=-1!=o?unescape(document.cookie.substring(s,o)):unescape(document.cookie.substring(s))}return t},dTree.prototype.updateCookie=function(){for(var e="",t=0;t<this.aNodes.length;t++)this.aNodes[t]._io&&this.aNodes[t].pid!=this.root.id&&(e&&(e+="."),e+=this.aNodes[t].id);this.setCookie("co"+this.obj,e)},dTree.prototype.isOpen=function(e){for(var t=this.getCookie("co"+this.obj).split("."),i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},Array.prototype.push||(Array.prototype.push=function(){for(var e=0;e<arguments.length;e++)this[this.length]=arguments[e];return this.length}),Array.prototype.pop||(Array.prototype.pop=function(){return lastElement=this[this.length-1],this.length=Math.max(this.length-1,0),lastElement});