if("undefined"==typeof Effect)throw"You must have the script.aculo.us library to use this accordion";var Accordion=Class.create({initialize:function(t,i){if(!$(t))throw"Attempted to initalize accordion with id: "+t+" which was not found.";this.accordion=$(t),this.options={toggleClass:"accordion-toggle",toggleActive:"accordion-toggle-active",contentClass:"accordion-content"},this.contents=this.accordion.select("div."+this.options.contentClass),this.isAnimating=!1,this.maxHeight=0,this.current=i?this.contents[i-1]:this.contents[0],this.toExpand=null,this.checkMaxHeight(),this.initialHide(),this.attachInitialMaxHeight();var s=this.clickHandler.bindAsEventListener(this);this.accordion.observe("click",s)},expand:function(t){this.toExpand=t.next("div."+this.options.contentClass),this.current!=this.toExpand&&(this.toExpand.show(),this.animate())},checkMaxHeight:function(){for(var t=0;t<this.contents.length;t++)this.contents[t].getHeight()>this.maxHeight&&(this.maxHeight=this.contents[t].getHeight())},attachInitialMaxHeight:function(){this.current.previous("div."+this.options.toggleClass).addClassName(this.options.toggleActive),this.current.getHeight()!=this.maxHeight&&this.current.setStyle({height:this.maxHeight+"px"})},clickHandler:function(t){var i=t.element();i.hasClassName(this.options.toggleClass)&&!this.isAnimating&&this.expand(i),i.up().hasClassName(this.options.toggleClass)&&!this.isAnimating&&this.expand(i.up())},initialHide:function(){for(var t=0;t<this.contents.length;t++)this.contents[t]!=this.current&&(this.contents[t].hide(),this.contents[t].setStyle({height:0}))},animate:function(){var t=new Array,i={sync:!0,scaleFrom:0,scaleContent:!1,transition:Effect.Transitions.sinoidal,scaleMode:{originalHeight:this.maxHeight,originalWidth:this.accordion.getWidth()},scaleX:!1,scaleY:!0};t.push(new Effect.Scale(this.toExpand,100,i)),i={sync:!0,scaleContent:!1,transition:Effect.Transitions.sinoidal,scaleX:!1,scaleY:!0},t.push(new Effect.Scale(this.current,0,i));var s=.75;new Effect.Parallel(t,{duration:s,fps:35,queue:{position:"end",scope:"accordion"},beforeStart:function(){this.isAnimating=!0,this.current.previous("div."+this.options.toggleClass).removeClassName(this.options.toggleActive),this.toExpand.previous("div."+this.options.toggleClass).addClassName(this.options.toggleActive)}.bind(this),afterFinish:function(){this.current.hide(),this.toExpand.setStyle({height:this.maxHeight+"px"}),this.current=this.toExpand,this.isAnimating=!1}.bind(this)})}});document.observe("dom:loaded",function(){accordion=new Accordion("settings")});